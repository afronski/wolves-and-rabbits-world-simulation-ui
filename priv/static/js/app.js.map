{"version":3,"sources":["web/static/vendor/phoenix.js","web/static/js/app.js","web/static/js/board.js","web/static/js/events-list.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"priv/static/js/app.js","sourcesContent":["(function(/*! Brunch !*/) {\n  'use strict';\n\n  var globals = typeof window !== 'undefined' ? window : global;\n  if (typeof globals.require === 'function') return;\n\n  var modules = {};\n  var cache = {};\n\n  var has = function(object, name) {\n    return ({}).hasOwnProperty.call(object, name);\n  };\n\n  var expand = function(root, name) {\n    var results = [], parts, part;\n    if (/^\\.\\.?(\\/|$)/.test(name)) {\n      parts = [root, name].join('/').split('/');\n    } else {\n      parts = name.split('/');\n    }\n    for (var i = 0, length = parts.length; i < length; i++) {\n      part = parts[i];\n      if (part === '..') {\n        results.pop();\n      } else if (part !== '.' && part !== '') {\n        results.push(part);\n      }\n    }\n    return results.join('/');\n  };\n\n  var dirname = function(path) {\n    return path.split('/').slice(0, -1).join('/');\n  };\n\n  var localRequire = function(path) {\n    return function(name) {\n      var dir = dirname(path);\n      var absolute = expand(dir, name);\n      return globals.require(absolute, path);\n    };\n  };\n\n  var initModule = function(name, definition) {\n    var module = {id: name, exports: {}};\n    cache[name] = module;\n    definition(module.exports, localRequire(name), module);\n    return module.exports;\n  };\n\n  var require = function(name, loaderPath) {\n    var path = expand(name, '.');\n    if (loaderPath == null) loaderPath = '/';\n\n    if (has(cache, path)) return cache[path].exports;\n    if (has(modules, path)) return initModule(path, modules[path]);\n\n    var dirIndex = expand(path, './index');\n    if (has(cache, dirIndex)) return cache[dirIndex].exports;\n    if (has(modules, dirIndex)) return initModule(dirIndex, modules[dirIndex]);\n\n    throw new Error('Cannot find module \"' + name + '\" from '+ '\"' + loaderPath + '\"');\n  };\n\n  var define = function(bundle, fn) {\n    if (typeof bundle === 'object') {\n      for (var key in bundle) {\n        if (has(bundle, key)) {\n          modules[key] = bundle[key];\n        }\n      }\n    } else {\n      modules[bundle] = fn;\n    }\n  };\n\n  var list = function() {\n    var result = [];\n    for (var item in modules) {\n      if (has(modules, item)) {\n        result.push(item);\n      }\n    }\n    return result;\n  };\n\n  globals.require = require;\n  globals.require.define = define;\n  globals.require.register = define;\n  globals.require.list = list;\n  globals.require.brunch = true;\n})();\nrequire.define({'phoenix': function(exports, require, module){ \"use strict\";\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\nvar SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };\nvar CHANNEL_EVENTS = {\n  close: \"phx_close\",\n  error: \"phx_error\",\n  join: \"phx_join\",\n  reply: \"phx_reply\",\n  leave: \"phx_leave\"\n};\n\nvar Push = (function () {\n\n  // Initializes the Push\n  //\n  // chan - The Channel\n  // event - The event, ie `\"phx_join\"`\n  // payload - The payload, ie `{user_id: 123}`\n  // mergePush - The optional `Push` to merge hooks from\n\n  function Push(chan, event, payload, mergePush) {\n    var _this = this;\n\n    _classCallCheck(this, Push);\n\n    this.chan = chan;\n    this.event = event;\n    this.payload = payload || {};\n    this.receivedResp = null;\n    this.afterHooks = [];\n    this.recHooks = {};\n    this.sent = false;\n    if (mergePush) {\n      mergePush.afterHooks.forEach(function (hook) {\n        return _this.after(hook.ms, hook.callback);\n      });\n      for (var status in mergePush.recHooks) {\n        if (mergePush.recHooks.hasOwnProperty(status)) {\n          this.receive(status, mergePush.recHooks[status]);\n        }\n      }\n    }\n  }\n\n  Push.prototype.send = function send() {\n    var _this = this;\n\n    var ref = this.chan.socket.makeRef();\n    var refEvent = this.chan.replyEventName(ref);\n\n    this.chan.on(refEvent, function (payload) {\n      _this.receivedResp = payload;\n      _this.matchReceive(payload);\n      _this.chan.off(refEvent);\n      _this.cancelAfters();\n    });\n\n    this.startAfters();\n    this.sent = true;\n    this.chan.socket.push({\n      topic: this.chan.topic,\n      event: this.event,\n      payload: this.payload,\n      ref: ref\n    });\n  };\n\n  Push.prototype.receive = function receive(status, callback) {\n    if (this.receivedResp && this.receivedResp.status === status) {\n      callback(this.receivedResp.response);\n    }\n    this.recHooks[status] = callback;\n    return this;\n  };\n\n  Push.prototype.after = function after(ms, callback) {\n    var timer = null;\n    if (this.sent) {\n      timer = setTimeout(callback, ms);\n    }\n    this.afterHooks.push({ ms: ms, callback: callback, timer: timer });\n    return this;\n  };\n\n  // private\n\n  Push.prototype.matchReceive = function matchReceive(_ref) {\n    var status = _ref.status;\n    var response = _ref.response;\n    var ref = _ref.ref;\n\n    var callback = this.recHooks[status];\n    if (!callback) {\n      return;\n    }\n\n    if (this.event === CHANNEL_EVENTS.join) {\n      callback(this.chan);\n    } else {\n      callback(response);\n    }\n  };\n\n  Push.prototype.cancelAfters = function cancelAfters() {\n    this.afterHooks.forEach(function (hook) {\n      clearTimeout(hook.timer);\n      hook.timer = null;\n    });\n  };\n\n  Push.prototype.startAfters = function startAfters() {\n    this.afterHooks.map(function (hook) {\n      if (!hook.timer) {\n        hook.timer = setTimeout(function () {\n          return hook.callback();\n        }, hook.ms);\n      }\n    });\n  };\n\n  return Push;\n})();\n\nvar Channel = exports.Channel = (function () {\n  function Channel(topic, message, callback, socket) {\n    _classCallCheck(this, Channel);\n\n    this.topic = topic;\n    this.message = message;\n    this.callback = callback;\n    this.socket = socket;\n    this.bindings = [];\n    this.afterHooks = [];\n    this.recHooks = {};\n    this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.message);\n\n    this.reset();\n  }\n\n  Channel.prototype.after = function after(ms, callback) {\n    this.joinPush.after(ms, callback);\n    return this;\n  };\n\n  Channel.prototype.receive = function receive(status, callback) {\n    this.joinPush.receive(status, callback);\n    return this;\n  };\n\n  Channel.prototype.rejoin = function rejoin() {\n    this.reset();\n    this.joinPush.send();\n  };\n\n  Channel.prototype.onClose = function onClose(callback) {\n    this.on(CHANNEL_EVENTS.close, callback);\n  };\n\n  Channel.prototype.onError = function onError(callback) {\n    var _this = this;\n\n    this.on(CHANNEL_EVENTS.error, function (reason) {\n      callback(reason);\n      _this.trigger(CHANNEL_EVENTS.close, \"error\");\n    });\n  };\n\n  Channel.prototype.reset = function reset() {\n    var _this = this;\n\n    this.bindings = [];\n    var newJoinPush = new Push(this, CHANNEL_EVENTS.join, this.message, this.joinPush);\n    this.joinPush = newJoinPush;\n    this.onError(function (reason) {\n      setTimeout(function () {\n        return _this.rejoin();\n      }, _this.socket.reconnectAfterMs);\n    });\n    this.on(CHANNEL_EVENTS.reply, function (payload) {\n      _this.trigger(_this.replyEventName(payload.ref), payload);\n    });\n  };\n\n  Channel.prototype.on = function on(event, callback) {\n    this.bindings.push({ event: event, callback: callback });\n  };\n\n  Channel.prototype.isMember = function isMember(topic) {\n    return this.topic === topic;\n  };\n\n  Channel.prototype.off = function off(event) {\n    this.bindings = this.bindings.filter(function (bind) {\n      return bind.event !== event;\n    });\n  };\n\n  Channel.prototype.trigger = function trigger(triggerEvent, msg) {\n    this.bindings.filter(function (bind) {\n      return bind.event === triggerEvent;\n    }).map(function (bind) {\n      return bind.callback(msg);\n    });\n  };\n\n  Channel.prototype.push = function push(event, payload) {\n    var pushEvent = new Push(this, event, payload);\n    pushEvent.send();\n\n    return pushEvent;\n  };\n\n  Channel.prototype.replyEventName = function replyEventName(ref) {\n    return \"chan_reply_\" + ref;\n  };\n\n  Channel.prototype.leave = function leave() {\n    var _this = this;\n\n    return this.push(CHANNEL_EVENTS.leave).receive(\"ok\", function () {\n      _this.socket.leave(_this);\n      chan.reset();\n    });\n  };\n\n  return Channel;\n})();\n\nvar Socket = exports.Socket = (function () {\n\n  // Initializes the Socket\n  //\n  // endPoint - The string WebSocket endpoint, ie, \"ws://example.com/ws\",\n  //                                               \"wss://example.com\"\n  //                                               \"/ws\" (inherited host & protocol)\n  // opts - Optional configuration\n  //   transport - The Websocket Transport, ie WebSocket, Phoenix.LongPoller.\n  //               Defaults to WebSocket with automatic LongPoller fallback.\n  //   heartbeatIntervalMs - The millisec interval to send a heartbeat message\n  //   reconnectAfterMs - The millisec interval to reconnect after connection loss\n  //   logger - The optional function for specialized logging, ie:\n  //            `logger: function(msg){ console.log(msg) }`\n  //   longpoller_timeout - The maximum timeout of a long poll AJAX request.\n  //                        Defaults to 20s (double the server long poll timer).\n  //\n  // For IE8 support use an ES5-shim (https://github.com/es-shims/es5-shim)\n  //\n\n  function Socket(endPoint) {\n    var opts = arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, Socket);\n\n    this.states = SOCKET_STATES;\n    this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };\n    this.flushEveryMs = 50;\n    this.reconnectTimer = null;\n    this.channels = [];\n    this.sendBuffer = [];\n    this.ref = 0;\n    this.transport = opts.transport || window.WebSocket || LongPoller;\n    this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 30000;\n    this.reconnectAfterMs = opts.reconnectAfterMs || 5000;\n    this.logger = opts.logger || function () {}; // noop\n    this.longpoller_timeout = opts.longpoller_timeout || 20000;\n    this.endPoint = this.expandEndpoint(endPoint);\n\n    this.resetBufferTimer();\n  }\n\n  Socket.prototype.protocol = function protocol() {\n    return location.protocol.match(/^https/) ? \"wss\" : \"ws\";\n  };\n\n  Socket.prototype.expandEndpoint = function expandEndpoint(endPoint) {\n    if (endPoint.charAt(0) !== \"/\") {\n      return endPoint;\n    }\n    if (endPoint.charAt(1) === \"/\") {\n      return \"\" + this.protocol() + \":\" + endPoint;\n    }\n\n    return \"\" + this.protocol() + \"://\" + location.host + \"\" + endPoint;\n  };\n\n  Socket.prototype.disconnect = function disconnect(callback, code, reason) {\n    if (this.conn) {\n      this.conn.onclose = function () {}; // noop\n      if (code) {\n        this.conn.close(code, reason || \"\");\n      } else {\n        this.conn.close();\n      }\n      this.conn = null;\n    }\n    callback && callback();\n  };\n\n  Socket.prototype.connect = function connect() {\n    var _this = this;\n\n    this.disconnect(function () {\n      _this.conn = new _this.transport(_this.endPoint);\n      _this.conn.timeout = _this.longpoller_timeout;\n      _this.conn.onopen = function () {\n        return _this.onConnOpen();\n      };\n      _this.conn.onerror = function (error) {\n        return _this.onConnError(error);\n      };\n      _this.conn.onmessage = function (event) {\n        return _this.onConnMessage(event);\n      };\n      _this.conn.onclose = function (event) {\n        return _this.onConnClose(event);\n      };\n    });\n  };\n\n  Socket.prototype.resetBufferTimer = function resetBufferTimer() {\n    var _this = this;\n\n    clearTimeout(this.sendBufferTimer);\n    this.sendBufferTimer = setTimeout(function () {\n      return _this.flushSendBuffer();\n    }, this.flushEveryMs);\n  };\n\n  // Logs the message. Override `this.logger` for specialized logging. noops by default\n\n  Socket.prototype.log = function log(msg) {\n    this.logger(msg);\n  };\n\n  // Registers callbacks for connection state change events\n  //\n  // Examples\n  //\n  //    socket.onError function(error){ alert(\"An error occurred\") }\n  //\n\n  Socket.prototype.onOpen = function onOpen(callback) {\n    this.stateChangeCallbacks.open.push(callback);\n  };\n\n  Socket.prototype.onClose = function onClose(callback) {\n    this.stateChangeCallbacks.close.push(callback);\n  };\n\n  Socket.prototype.onError = function onError(callback) {\n    this.stateChangeCallbacks.error.push(callback);\n  };\n\n  Socket.prototype.onMessage = function onMessage(callback) {\n    this.stateChangeCallbacks.message.push(callback);\n  };\n\n  Socket.prototype.onConnOpen = function onConnOpen() {\n    var _this = this;\n\n    clearInterval(this.reconnectTimer);\n    if (!this.conn.skipHeartbeat) {\n      clearInterval(this.heartbeatTimer);\n      this.heartbeatTimer = setInterval(function () {\n        return _this.sendHeartbeat();\n      }, this.heartbeatIntervalMs);\n    }\n    this.rejoinAll();\n    this.stateChangeCallbacks.open.forEach(function (callback) {\n      return callback();\n    });\n  };\n\n  Socket.prototype.onConnClose = function onConnClose(event) {\n    var _this = this;\n\n    this.log(\"WS close:\");\n    this.log(event);\n    clearInterval(this.reconnectTimer);\n    clearInterval(this.heartbeatTimer);\n    this.reconnectTimer = setInterval(function () {\n      return _this.connect();\n    }, this.reconnectAfterMs);\n    this.stateChangeCallbacks.close.forEach(function (callback) {\n      return callback(event);\n    });\n  };\n\n  Socket.prototype.onConnError = function onConnError(error) {\n    this.log(\"WS error:\");\n    this.log(error);\n    this.stateChangeCallbacks.error.forEach(function (callback) {\n      return callback(error);\n    });\n  };\n\n  Socket.prototype.connectionState = function connectionState() {\n    switch (this.conn && this.conn.readyState) {\n      case this.states.connecting:\n        return \"connecting\";\n      case this.states.open:\n        return \"open\";\n      case this.states.closing:\n        return \"closing\";\n      default:\n        return \"closed\";\n    }\n  };\n\n  Socket.prototype.isConnected = function isConnected() {\n    return this.connectionState() === \"open\";\n  };\n\n  Socket.prototype.rejoinAll = function rejoinAll() {\n    this.channels.forEach(function (chan) {\n      return chan.rejoin();\n    });\n  };\n\n  Socket.prototype.join = function join(topic, message, callback) {\n    var chan = new Channel(topic, message, callback, this);\n    this.channels.push(chan);\n    if (this.isConnected()) {\n      chan.rejoin();\n    }\n    return chan;\n  };\n\n  Socket.prototype.leave = function leave(chan) {\n    this.channels = this.channels.filter(function (c) {\n      return !c.isMember(chan.topic);\n    });\n  };\n\n  Socket.prototype.push = function push(data) {\n    var _this = this;\n\n    var callback = function () {\n      return _this.conn.send(JSON.stringify(data));\n    };\n    if (this.isConnected()) {\n      callback();\n    } else {\n      this.sendBuffer.push(callback);\n    }\n  };\n\n  // Return the next message ref, accounting for overflows\n\n  Socket.prototype.makeRef = function makeRef() {\n    var newRef = this.ref + 1;\n    if (newRef === this.ref) {\n      this.ref = 0;\n    } else {\n      this.ref = newRef;\n    }\n\n    return this.ref.toString();\n  };\n\n  Socket.prototype.sendHeartbeat = function sendHeartbeat() {\n    this.push({ topic: \"phoenix\", event: \"heartbeat\", payload: {}, ref: this.makeRef() });\n  };\n\n  Socket.prototype.flushSendBuffer = function flushSendBuffer() {\n    if (this.isConnected() && this.sendBuffer.length > 0) {\n      this.sendBuffer.forEach(function (callback) {\n        return callback();\n      });\n      this.sendBuffer = [];\n    }\n    this.resetBufferTimer();\n  };\n\n  Socket.prototype.onConnMessage = function onConnMessage(rawMessage) {\n    this.log(\"message received:\");\n    this.log(rawMessage);\n\n    var _JSON$parse = JSON.parse(rawMessage.data);\n\n    var topic = _JSON$parse.topic;\n    var event = _JSON$parse.event;\n    var payload = _JSON$parse.payload;\n\n    this.channels.filter(function (chan) {\n      return chan.isMember(topic);\n    }).forEach(function (chan) {\n      return chan.trigger(event, payload);\n    });\n    this.stateChangeCallbacks.message.forEach(function (callback) {\n      callback(topic, event, payload);\n    });\n  };\n\n  return Socket;\n})();\n\nvar LongPoller = exports.LongPoller = (function () {\n  function LongPoller(endPoint) {\n    _classCallCheck(this, LongPoller);\n\n    this.retryInMs = 5000;\n    this.endPoint = null;\n    this.token = null;\n    this.sig = null;\n    this.skipHeartbeat = true;\n    this.onopen = function () {}; // noop\n    this.onerror = function () {}; // noop\n    this.onmessage = function () {}; // noop\n    this.onclose = function () {}; // noop\n    this.states = SOCKET_STATES;\n    this.upgradeEndpoint = this.normalizeEndpoint(endPoint);\n    this.pollEndpoint = this.upgradeEndpoint + (/\\/$/.test(endPoint) ? \"poll\" : \"/poll\");\n    this.readyState = this.states.connecting;\n\n    this.poll();\n  }\n\n  LongPoller.prototype.normalizeEndpoint = function normalizeEndpoint(endPoint) {\n    return endPoint.replace(\"ws://\", \"http://\").replace(\"wss://\", \"https://\");\n  };\n\n  LongPoller.prototype.endpointURL = function endpointURL() {\n    return this.pollEndpoint + (\"?token=\" + encodeURIComponent(this.token) + \"&sig=\" + encodeURIComponent(this.sig));\n  };\n\n  LongPoller.prototype.closeAndRetry = function closeAndRetry() {\n    this.close();\n    this.readyState = this.states.connecting;\n  };\n\n  LongPoller.prototype.ontimeout = function ontimeout() {\n    this.onerror(\"timeout\");\n    this.closeAndRetry();\n  };\n\n  LongPoller.prototype.poll = function poll() {\n    var _this = this;\n\n    if (!(this.readyState === this.states.open || this.readyState === this.states.connecting)) {\n      return;\n    }\n\n    Ajax.request(\"GET\", this.endpointURL(), \"application/json\", null, this.timeout, this.ontimeout.bind(this), function (resp) {\n      if (resp) {\n        var status = resp.status;\n        var token = resp.token;\n        var sig = resp.sig;\n        var messages = resp.messages;\n\n        _this.token = token;\n        _this.sig = sig;\n      } else {\n        var status = 0;\n      }\n\n      switch (status) {\n        case 200:\n          messages.forEach(function (msg) {\n            return _this.onmessage({ data: JSON.stringify(msg) });\n          });\n          _this.poll();\n          break;\n        case 204:\n          _this.poll();\n          break;\n        case 410:\n          _this.readyState = _this.states.open;\n          _this.onopen();\n          _this.poll();\n          break;\n        case 0:\n        case 500:\n          _this.onerror();\n          _this.closeAndRetry();\n          break;\n        default:\n          throw \"unhandled poll status \" + status;\n      }\n    });\n  };\n\n  LongPoller.prototype.send = function send(body) {\n    var _this = this;\n\n    Ajax.request(\"POST\", this.endpointURL(), \"application/json\", body, this.timeout, this.onerror.bind(this, \"timeout\"), function (resp) {\n      if (!resp || resp.status !== 200) {\n        _this.onerror(status);\n        _this.closeAndRetry();\n      }\n    });\n  };\n\n  LongPoller.prototype.close = function close(code, reason) {\n    this.readyState = this.states.closed;\n    this.onclose();\n  };\n\n  return LongPoller;\n})();\n\nvar Ajax = exports.Ajax = (function () {\n  function Ajax() {\n    _classCallCheck(this, Ajax);\n  }\n\n  Ajax.request = function request(method, endPoint, accept, body, timeout, ontimeout, callback) {\n    if (window.XDomainRequest) {\n      var req = new XDomainRequest(); // IE8, IE9\n      this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);\n    } else {\n      var req = window.XMLHttpRequest ? new XMLHttpRequest() : // IE7+, Firefox, Chrome, Opera, Safari\n      new ActiveXObject(\"Microsoft.XMLHTTP\"); // IE6, IE5\n      this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);\n    }\n  };\n\n  Ajax.xdomainRequest = function xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {\n    var _this = this;\n\n    req.timeout = timeout;\n    req.open(method, endPoint);\n    req.onload = function () {\n      var response = _this.parseJSON(req.responseText);\n      callback && callback(response);\n    };\n    if (ontimeout) {\n      req.ontimeout = ontimeout;\n    }\n\n    // Work around bug in IE9 that requires an attached onprogress handler\n    req.onprogress = function () {};\n\n    req.send(body);\n  };\n\n  Ajax.xhrRequest = function xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {\n    var _this = this;\n\n    req.timeout = timeout;\n    req.open(method, endPoint, true);\n    req.setRequestHeader(\"Content-Type\", accept);\n    req.onerror = function () {\n      callback && callback(null);\n    };\n    req.onreadystatechange = function () {\n      if (req.readyState === _this.states.complete && callback) {\n        var response = _this.parseJSON(req.responseText);\n        callback(response);\n      }\n    };\n    if (ontimeout) {\n      req.ontimeout = ontimeout;\n    }\n\n    req.send(body);\n  };\n\n  Ajax.parseJSON = function parseJSON(resp) {\n    return resp && resp !== \"\" ? JSON.parse(resp) : null;\n  };\n\n  return Ajax;\n})();\n\nAjax.states = { complete: 4 };\nexports.__esModule = true;\n }});\nif(typeof(window) === 'object' && !window.Phoenix){ window.Phoenix = require('phoenix') };","\"use strict\";\n\nimport { Socket } from \"phoenix\";\nimport { EventsList } from \"./events-list\";\nimport { Board } from \"./board\";\n\nconst IS_BACKGROUND_AUDIO_MUTED_KEY = \"BackgroundAudioMuted\";\n\nclass App {\n    constructor() {\n        this.canvas = document.querySelector(\"#terrain\");\n\n        this.backgroundAudio = document.querySelector(\"#background-audio\");\n\n        this.startSimulation = document.querySelector(\"#start-simulation\");\n        this.stopSimulation = document.querySelector(\"#stop-simulation\");\n\n        this.audioMuted = JSON.parse(window.localStorage.getItem(IS_BACKGROUND_AUDIO_MUTED_KEY)) || false;\n        this.simulationState = this.canvas.getAttribute(\"data-world-simulation-started\");\n\n        this.events = null;\n        this.board = null;\n\n        if (this.simulationState) {\n            this.startSimulation.setAttribute(\"disabled\", true);\n            this.stopSimulation.removeAttribute(\"disabled\");\n        }\n    }\n\n    initialize() {\n        let width = parseInt(this.canvas.getAttribute(\"width\"), 10);\n        let height = parseInt(this.canvas.getAttribute(\"height\"), 10);\n\n        let margin = parseInt(this.canvas.getAttribute(\"data-world-margin\"), 10);\n\n        let eventsList = document.querySelector(\"#events-list\");\n\n        this.events = new EventsList(eventsList);\n        this.board = new Board(width, height, margin, this.canvas, () => { this.connect() });\n    }\n\n    connect() {\n        let socket = new Socket(\"/communications\");\n\n        socket.connect();\n\n        socket.join(\"controller\", {}).receive(\"ok\", channel => {\n            console.info(\"Communication channel: attached, Channel:\", channel);\n\n            this.startSimulation.addEventListener(\"click\", () => {\n                this.startSimulation.setAttribute(\"disabled\", true);\n                this.stopSimulation.removeAttribute(\"disabled\");\n\n                this.simulationState = true;\n\n                channel.push(\"start_simulation\");\n            });\n\n            this.stopSimulation.addEventListener(\"click\", () => {\n                this.stopSimulation.setAttribute(\"disabled\", true);\n                this.startSimulation.removeAttribute(\"disabled\");\n\n                this.simulationState = false;\n\n                channel.push(\"stop_simulation\");\n            });\n        });\n\n        socket.join(\"events\", {}).receive(\"ok\", channel => {\n            console.info(\"Events channel: attached, Channel:\", channel);\n\n            channel.on(\"incoming\", payload => {\n                this.events.updateList(payload);\n                this.board.updateBoard(payload);\n            });\n        });\n    }\n\n    playMusic() {\n        this.backgroundAudio.muted = this.audioMuted;\n\n        this.backgroundAudio.loop = true;\n        this.backgroundAudio.play();\n\n        window.addEventListener(\"keydown\", (event) => {\n            let key = event.keyCode || event.which;\n\n            // Mute background audio via \"m\" or \"M\" key.\n\n            if (key === 77) {\n                this.audioMuted = !this.audioMuted;\n                this.backgroundAudio.muted = this.audioMuted;\n\n                window.localStorage.setItem(IS_BACKGROUND_AUDIO_MUTED_KEY, this.audioMuted);\n            }\n        }, false);\n    }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    let app = new App();\n\n    app.playMusic();\n    app.initialize();\n});\n","\"use strict\";\n\nconst TILE_SIZE = 10;\n\nexport class Board {\n    constructor(width, height, margin, canvas, loaded) {\n        this.width = width;\n        this.height = height;\n\n        this.worldWidth = width / TILE_SIZE;\n        this.worldHeight = height / TILE_SIZE;\n\n        this.margin = margin / TILE_SIZE;\n\n        this.canvas = canvas;\n        this.context = canvas.getContext(\"2d\");\n\n        this.tiles = {\n            grass: this.loadTile(\"grass\")\n        };\n\n        this.clearBackground();\n        this.drawTerrain();\n\n        loaded();\n    }\n\n    loadTile(name) {\n        return document.querySelector(`#${name}`);\n    }\n\n    clearBackground() {\n        this.context.fillStyle = \"#256D7B\";\n        this.context.fillRect(0, 0, this.width, this.height);\n    }\n\n    drawTerrain() {\n        let startingX = this.margin / 2;\n        let startingY = this.margin / 2;\n\n        for (let x = startingX; x < this.worldWidth - this.margin / 2; ++x) {\n            for (let y = startingY; y < this.worldHeight - this.margin / 2; ++y) {\n                this.context.drawImage(this.tiles.grass, x * TILE_SIZE, y * TILE_SIZE);\n            }\n        }\n    }\n\n    updateBoard(payload) {\n        console.log(\"[BOARD]\", payload);\n    }\n}\n","\"use strict\";\n\nexport class EventsList {\n    constructor(list) {\n        this.list = list;\n    }\n\n    updateList(payload) {\n        var item = document.createElement(\"li\");\n\n        item.appendChild(document.createTextNode(`${payload.who} - ${payload.action}`));\n        this.list.appendChild(item);\n\n        this.list.scrollTop = this.list.scrollHeight;\n    }\n}\n"]}